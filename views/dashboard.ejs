<%- include("./templates/header.ejs", {title: "Dashboard"}) %>
<div id="content" class="m-6 flex-1">
  <h1
    class="my-4 text-3xl md:text-5xl text-blue-800 font-bold leading-tight text-center md:text-left slide-in-bottom-h1"
  >
    Hello there <%= firstName %>!
  </h1>

  <div class="w-full md:w-1/3 my-6 md:my-1">
    <a
      class="bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow inline-flex items-center"
      href="/logout"
    >
      Log Out
      <svg
        height="21"
        viewBox="0 0 21 21"
        width="21"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g
          fill="none"
          fill-rule="evenodd"
          stroke="#2a2e3b"
          stroke-linecap="round"
          stroke-linejoin="round"
          transform="matrix(-1 0 0 1 18 3)"
        >
          <path
            d="m12.717 5.379-.068 4.175-4.175.067"
            transform="matrix(.70710678 .70710678 .70710678 -.70710678 -2.199921 5.311079)"
          />
          <path d="m9 3v9" transform="matrix(0 1 -1 0 16.5 -1.5)" />
          <path
            d="m-1.74806976 2.74806976.0022166 7.50105294c.00091744 1.1043385.89625231 1.9994088 2.00059101 1.9999999h9.99438475c1.1045695 0 2-.8954305 2-2v-7.50105284"
            transform="matrix(0 1 -1 0 12.749 2.249)"
          />
        </g>
      </svg>
    </a>
  </div>

  <form class="w-full max-w-3" action="/api/managers/update" method="POST">
    <div class="flex flex-wrap -mx-3 mb-6 m-6">
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label
          class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
          for="grid-last-name"
        >
          Your First Name
        </label>
        <input
          class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
          id="firstName"
          name="firstName"
          type="text"
          value="<%= firstName %>"
        />
      </div>
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label
          class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
          for="grid-last-name"
        >
          Your Email Address
        </label>
        <input
          class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
          id="email"
          name="email"
          type="text"
          value="<%= email %>"
        />
      </div>
    </div>
    <div class="flex flex-wrap -mx-3 mb-6 m-6">
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label
          class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
          for="grid-last-name"
        >
          New Password (optional)
        </label>
        <input
          class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
          id="password"
          name="password"
          type="password"
          placeholder="********"
        />
      </div>
    </div>
    <div class="flex flex-wrap -mx-3 mb-6 m-6">
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label
          class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
          for="grid-last-name"
        >
          Confirm Current Password (required)
        </label>
        <input
          class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
          id="confirmPassword"
          name="confirmPassword"
          type="password"
          placeholder="********"
        />
      </div>
    </div>
    <div class="w-full md:w-1/3 my-6 md:my-1">
      <button
        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
      >
        Save Changes
      </button>
    </div>
  </form>

  <h2
    class="leading-normal text-base md:text-2xl mb-8 text-center md:text-left slide-in-bottom-subtitle pt-20"
  >
    Users You Are Managing
  </h2>
  <table class="table-fixed">
    <thead>
      <tr>
        <th class="w-1/2 px-4 py-2">User's Name</th>
        <th class="w-1/2 px-4 py-2">Temporary Login Code</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% for(var i = 0; i < users.length; i++) { %>
      <tr>
        <td class="border px-4 py-2"><%= users[i].firstName %></td>
        <td class="border px-4 py-2"><%= users[i].otc %></td>
        <td class="border px-4 py-2">
          <a
            href="/dashboard/<%= users[i]._id %>"
            class="text-blue-600 underline font-bold"
            >Edit</a
          >
        </td>
        <td class="border px-4 py-2">
          <form action="/api/users/delete/<%= users[i]._id %>" method="post">
            <div class="w-full md:w-1/3 my-6 md:my-1">
              <button
                class="border border-red-600 text-red-600 hover:bg-red-600 hover:text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline bg-transparent"
              >
                DELETE
              </button>
            </div>
          </form>
        </td>
      </tr>
      <% } %>
    </tbody>
  </table>
  <div class="w-full md:w-1/3 my-6 md:my-1 py-2">
    <a
      href="/dashboard/manager/user/new"
      class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
    >
      + Add a new User
    </a>
  </div>

  <h2
    class="leading-normal text-base md:text-2xl mb-8 text-center md:text-left slide-in-bottom-subtitle pt-20"
  >
    Danger Zone
  </h2>

  <div class="w-full my-6 md:my-1">
    <form action="/api/managers/delete" method="post">
      <div class="w-full md:w-1/3 my-6 md:my-1">
        <button
          class="border border-red-600 text-red-600 hover:bg-red-600 hover:text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline bg-transparent"
        >
          Delete Your Account
        </button>
      </div>
    </form>
  </div>
</div>
<%- include("./templates/footer.ejs") %>
